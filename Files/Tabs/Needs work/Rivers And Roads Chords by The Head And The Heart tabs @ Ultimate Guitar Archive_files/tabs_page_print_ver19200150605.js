var q=0;var accords=new Array();accords[1]="C";accords[2]="C#";accords[3]="D";accords[4]="D#";accords[5]="E";accords[6]="F";accords[7]="F#";accords[8]="G";accords[9]="G#";accords[10]="A";accords[11]="A#";accords[12]="B";var cnt=accords.length-1;function str_pad(c,g,f,d){var e="",a;var b=function(k,h){var l="",j;while(l.length<h){l+=k}l=l.substr(0,h);return l};if(d!="STR_PAD_LEFT"&&d!="STR_PAD_RIGHT"&&d!="STR_PAD_BOTH"){d="STR_PAD_RIGHT"}if((a=g-c.length)>0){if(d=="STR_PAD_LEFT"){c=b(f,a)+c}else{if(d=="STR_PAD_RIGHT"){c=c+b(f,a)}else{if(d=="STR_PAD_BOTH"){e=b(f,Math.ceil(a/2));c=e+c+e;c=c.substr(0,g)}}}}return c}function modulate_accord(g,f){f=parseInt(f,10);if(g.indexOf("/")!=-1){var b=g.split("/");if(b[1]!="9"){for(var e=0;e<b.length;e++){b[e]=modulate_accord(b[e],f)}return b.join("/")}}var c=g.charAt(0).toUpperCase()+g.substring(1);if(c.charAt(0)=="H"){c="B"+c.substring(1)}if(c.charAt(0)=="B"&&c.indexOf("#")!=-1){c=c.replace("#","");c="C"+c.substring(1)}if(c.charAt(0)=="E"&&c.indexOf("#")!=-1){c=c.replace("#","");c="F"+c.substring(1)}var a="";if(c.indexOf("#")!=-1){a=c.charAt(0)+"#"}else{if(c.substring(1).indexOf("b")!=-1){var d;for(var e=1;e<=cnt;e++){if(accords[e]==c.charAt(0)){d=e;break}}if(d==1){d=cnt}else{d--}a=accords[d]}else{a=c.charAt(0)}}for(var e=1;e<=cnt;e++){if(accords[e]==a){d=e;break}}d+=f;if(d<1){d+=cnt}if(d>cnt){d-=cnt}if(c.indexOf("#")!=-1){c=c.replace("#","")}else{if(c.substring(1).indexOf("b")!=-1){c=c.replace("b","")}}c=accords[d]+c.substring(1);return c}function add_ch(b){var a=build_applicature_txt(b);$("#list").prepend(a)}function build_applicature_txt(g){var f=tuning_.split(" ");var c="";var j="";c+='<div style="width: 192px; height: 190px; float: left; margin: 1px;background:#f9f9f9; border:solid #ddd 1px; " id="all_ch_'+q+'"><div style="float: left; width: 92%;text-align:center; font-size:14px; line-height:22px; color:#000; padding:5px 0px"><b>';c+=g+'</b></div><div class="x" style="float: right; padding: 3px; cursor: pointer;" onClick="$(\'#all_ch_'+q+"').remove();\">x</div>";var m=0;for(k1 in applicature[g]){if(k1!="suggested_fret"&&k1!="old_ch"){m++}}var d=0;for(k1 in applicature[g]){if(k1=="suggested_fret"||k1=="old_ch"){continue}var n=q+"_"+d;if(d){j="none"}else{j=""}var l=applicature[g][k1];c+='<div style="clear: both; display: '+j+'" id = "'+n+'"><div style="padding:1px 5px 0px 5px;  width:185px;">';if("ukulele"==instr){var b=new Array(["-","-","-","-","-"],["-","-","-","-","-"],["-","-","-","-","-"],["-","-","-","-","-"])}else{var b=new Array(["-","-","-","-","-"],["-","-","-","-","-"],["-","-","-","-","-"],["-","-","-","-","-"],["-","-","-","-","-"],["-","-","-","-","-"])}for(var s in l.l){var i=l.l[s].f-l.f+((l.f==0)?0:1);for(var a=0;a<=l.l[s].e;a++){b[a][i-1]="<b>X</b>"}}for(var a in l.t){var h=l.t[a]-l.f+((l.f==0)?0:1);if((h>0)&&(l.g[a])){b[a][h-1]="<b>"+l.g[a]+"</b>"}}var o="";for(var a in l.t){o+=str_pad(f[f.length-1-a],2," ","STR_PAD_RIGHT")+"|";for(var e in b[a]){o+="-"+b[a][e]+"-|"}if(l.t[a]==-1){o+=" x<br/>"}else{o+=" o<br/>"}}c+="<pre>"+o+"</pre></div>";var k="&nbsp;";if(applicature[g][k1]["f"]!=0){k=applicature[g][k1]["f"]+" fr."}var t;var p;if(d<1){t=q+"_"+(m-1)}else{t=q+"_"+(d-1)}if(d>=m-1){p=q+"_0"}else{p=q+"_"+(d+1)}c+='<div class="fs-10" style="padding:0px 0px 0px 23px; color:#000;">'+k+"</div>";c+='<div class="fs-10" style="padding: 10px 0px; text-align: center; " id="vers"><a href="javascript: void(0)" class="var-l"><img src="http://'+js_img_domain+'/_img/1x1.gif" onClick="$(\'#'+n+"').hide();$('#"+t+'\').show();return false;"></a>&nbsp;&nbsp;variations&nbsp;&nbsp;<a href="javascript: void(0)" class="var-r"><img src="http://'+js_img_domain+'/_img/1x1.gif" onClick="$(\'#'+n+"').hide();$('#"+p+"').show();return false;\"></a></div></div>";d++}q++;return c};